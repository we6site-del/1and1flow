# 节点连接测试指南

## 功能说明

OnCanvasComponentPicker组件允许用户通过拖拽或点击节点端口来选择要创建的节点类型（图片生成或视频生成）。

## 测试步骤

### 方法1：拖拽端口创建连接

1. **创建输入节点**
   - 点击左侧工具栏中的"输入"图标（文本框图标）
   - 在画布上点击放置节点

2. **拖拽端口**
   - 找到输入节点右侧的圆形端口（输出端口）
   - 点击并按住端口
   - 向右拖动鼠标

3. **选择节点类型**
   - 拖动一定距离后会出现一个白色菜单
   - 菜单中显示两个选项：
     - 图片（带图片图标）
     - 视频（带播放图标）

4. **创建节点**
   - 点击任一选项
   - 系统自动创建对应的节点并建立连接

### 方法2：点击端口创建连接

1. **创建输入节点**
   - 同上

2. **点击端口**
   - 直接点击输入节点右侧的输出端口
   - 立即显示节点选择菜单

3. **选择节点类型**
   - 从菜单中选择"图片"或"视频"
   - 系统自动创建节点并建立连接

## 预期效果

### 菜单样式
- **背景**：白色
- **边框**：浅灰色（#e5e7eb）
- **圆角**：12px
- **阴影**：轻微的阴影效果

### 菜单项样式
- **布局**：垂直排列，每项包含图标和文字
- **图标**：20x20px，左侧对齐
- **文字**：深灰色（#1f2937），14px字体
- **悬停**：浅灰色背景（#f3f4f6）

### 交互效果
- 菜单自动定位在连接线末端
- 悬停时菜单项高亮
- 点击后立即创建节点并关闭菜单
- 点击菜单外部关闭菜单并删除未完成的连接

## 常见问题

### 问题1：菜单显示空白
**原因**：可能是缓存问题或样式冲突

**解决方法**：
1. 清除浏览器缓存（Ctrl+Shift+R）
2. 检查控制台是否有错误
3. 重启开发服务器

### 问题2：菜单位置不正确
**原因**：缩放或坐标转换问题

**解决方法**：
1. 确保画布缩放为100%
2. 检查浏览器缩放设置
3. 尝试刷新页面

### 问题3：无法点击菜单项
**原因**：CSS层级或pointer-events问题

**解决方法**：
1. 检查控制台错误
2. 确保菜单z-index正确
3. 检查是否有遮挡元素

## 已知限制

- 当前只支持选择图片生成和视频生成节点
- 菜单只在从输入节点的输出端口拖拽时显示
- 不支持从生成节点向回拖拽创建输入节点

## 后续改进计划

- [ ] 添加更多节点类型选项（文本生成、聊天等）
- [ ] 支持节点搜索和过滤
- [ ] 添加节点描述和预览
- [ ] 支持自定义节点颜色和图标
- [ ] 实现节点模板和快捷键
