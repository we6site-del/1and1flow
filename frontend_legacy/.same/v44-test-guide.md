# Version 44 测试指南

## 📋 测试目标

验证工具面板正确显示 tldraw 系统工具，并且点击工具能够正确激活对应功能。

## 🧪 测试步骤

### 测试 1: 查看工具面板

#### 步骤
1. 找到左侧工具栏（60px宽的白色栏）
2. 找到第四个图标（四方格图标）- 这是"工具"按钮
3. 点击这个图标

#### 预期结果
✅ 右侧应该滑入一个 280px 宽的白色面板
✅ 面板顶部显示"工具"标题
✅ 右上角有关闭按钮
✅ 面板内容显示多个工具分类

#### 验证要点
- [ ] 面板滑入动画流畅（0.2s）
- [ ] 面板背景纯白色
- [ ] 有轻微阴影效果

### 测试 2: 查看系统工具分类

在工具面板打开的情况下，向下滚动查看所有分类。

#### 应该看到的分类

**1. 基础工具**
```
✏️ 选择工具          [V]
👋 手型工具          [H]
```

**2. 绘图工具**
```
🖊️ 画笔工具          [D]
🧹 橡皮擦           [E]
🔦 激光笔           [L]
```

**3. 形状工具**
```
▭ 矩形             [R]
◯ 椭圆             [O]
△ 三角形           [T]
◇ 菱形
⬡ 六边形
★ 星形
```

**4. 文本和箭头**
```
T 文本             [T]
→ 箭头             [A]
/ 直线
```

**5. AI 节点**
```
文本输入节点
图片生成节点
视频生成节点
文本生成节点
```

#### 验证要点
- [ ] 所有分类标题清晰可见（灰色大写）
- [ ] 每个工具都有图标
- [ ] 快捷键显示在右侧（浅灰色小标签）
- [ ] 可以流畅滚动

### 测试 3: 测试画笔工具

#### 步骤
1. 确保工具面板已打开
2. 找到"绘图工具"分类
3. 点击第一项"画笔工具 [D]"

#### 预期结果
✅ 工具面板自动关闭
✅ 画布进入绘图模式
✅ 鼠标移到画布上变成画笔图标
✅ 可以在画布上自由绘制线条

#### 详细验证
1. **面板行为**
   - [ ] 点击后面板立即关闭
   - [ ] 左侧"工具"图标保持 active 状态（蓝色背景 + 左侧蓝条）

2. **画布状态**
   - [ ] 进入绘图模式
   - [ ] 光标变成铅笔图标
   - [ ] 可以按住鼠标左键拖动绘制

3. **绘制功能**
   - [ ] 在画布上拖动鼠标
   - [ ] 应该能看到黑色线条
   - [ ] 线条平滑自然
   - [ ] 释放鼠标后线条固定

### 测试 4: 测试其他系统工具

#### 4.1 测试矩形工具

**步骤：**
1. 再次点击左侧"工具"图标
2. 找到"形状工具"分类
3. 点击"矩形 [R]"

**预期：**
- [ ] 面板关闭
- [ ] 进入矩形绘制模式
- [ ] 可以拖动绘制矩形
- [ ] 矩形有填充和边框

#### 4.2 测试文本工具

**步骤：**
1. 打开工具面板
2. 找到"文本和箭头"分类
3. 点击"文本 [T]"

**预期：**
- [ ] 面板关闭
- [ ] 进入文本模式
- [ ] 点击画布任意位置
- [ ] 出现文本输入框
- [ ] 可以输入文字

#### 4.3 测试箭头工具

**步骤：**
1. 打开工具面板
2. 点击"箭头 [A]"

**预期：**
- [ ] 面板关闭
- [ ] 进入箭头绘制模式
- [ ] 拖动可以绘制箭头
- [ ] 箭头有起点和终点

### 测试 5: 测试选择工具切换

#### 步骤
1. 在绘图模式下，打开工具面板
2. 点击"选择工具 [V]"

#### 预期结果
- [ ] 退出绘图模式
- [ ] 进入选择模式
- [ ] 可以点击选中之前绘制的对象
- [ ] 选中对象出现蓝色边框和控制点

### 测试 6: 测试 AI 节点添加

#### 步骤
1. 打开工具面板
2. 滚动到底部"AI 节点"分类
3. 点击"图片生成节点"

#### 预期结果
- [ ] 面板关闭
- [ ] 在画布中心出现图片生成节点
- [ ] 节点包含完整UI（模型选择、参数等）
- [ ] 可以与节点交互

### 测试 7: 测试快速访问面板

#### 步骤
1. 关闭当前面板（如果打开）
2. 点击左侧第三个图标（星星）- "快速访问"
3. 查看面板内容

#### 预期结果
✅ 看到 2x3 网格布局的工具卡片：
```
┌─────────┬─────────┐
│  画笔   │  文本   │
├─────────┼─────────┤
│  矩形   │  箭头   │
├─────────┼─────────┤
│文本输入 │图片生成 │
└─────────┴─────────┘
```

#### 验证
- [ ] 6个工具卡片清晰显示
- [ ] 每个卡片有图标和名称
- [ ] Hover时卡片上浮和添加阴影
- [ ] 点击任意卡片激活对应工具

### 测试 8: 测试快捷键显示

#### 步骤
1. 打开工具面板
2. 仔细观察每个工具右侧

#### 验证要点
- [ ] 有快捷键的工具显示小标签
- [ ] 标签背景浅灰色
- [ ] 标签文字清晰（如 V, H, D 等）
- [ ] 标签位置在工具名称右侧
- [ ] 没有快捷键的工具不显示标签

### 测试 9: 测试面板关闭

#### 方法 1: 点击关闭按钮
1. 打开任意面板
2. 点击右上角 X 按钮

**预期：**
- [ ] 面板关闭
- [ ] 滑出动画流畅

#### 方法 2: 再次点击工具图标
1. 点击"工具"图标打开面板
2. 再次点击"工具"图标

**预期：**
- [ ] 面板关闭
- [ ] 工具图标 active 状态消失

### 测试 10: 测试 Hover 效果

#### 工具图标 Hover
**步骤：** 鼠标移到左侧任意工具图标上

**预期：**
- [ ] 背景变成浅蓝色
- [ ] 图标颜色变蓝
- [ ] 过渡动画流畅

#### 面板列表项 Hover
**步骤：** 在工具面板中，鼠标移到任意工具上

**预期：**
- [ ] 背景变成浅蓝色
- [ ] 图标和文字变蓝
- [ ] 过渡动画流畅

### 测试 11: 测试连续使用

#### 场景：绘制一个完整的图形
1. 使用画笔绘制背景
2. 切换到矩形工具画框
3. 使用文本工具添加标题
4. 用箭头连接元素
5. 添加图片生成节点

#### 验证
- [ ] 工具切换顺畅
- [ ] 每次点击后面板自动关闭
- [ ] 可以正常使用所有工具
- [ ] 工具之间无冲突

## 🐛 常见问题排查

### 问题 1: 点击工具图标没有反应

**检查：**
1. 是否在正确的图标上（第四个，四方格图标）
2. 浏览器控制台是否有错误
3. 尝试刷新页面 `Ctrl+R`

### 问题 2: 面板不关闭

**解决：**
1. 点击关闭按钮（X）
2. 再次点击左侧工具图标
3. 点击其他区域

### 问题 3: 点击画笔工具无法绘图

**检查：**
1. 确认面板已关闭
2. 检查光标是否变成画笔图标
3. 尝试按键盘 `D` 键激活画笔
4. 检查是否在画布区域内

### 问题 4: 快捷键不显示

**解决：**
1. 滚动面板确保看到完整内容
2. 检查浏览器缩放（应该是 100%）
3. 刷新页面

### 问题 5: AI 节点不在中心

**说明：**
- 节点位置是基于当前视口中心
- 如果画布缩放或平移，中心位置会改变
- 这是正常行为

## 📸 测试截图参考

### 1. 工具面板打开状态
```
┌─────────────────────────────┐
│ 工具                    [X] │
├─────────────────────────────┤
│ 系统绘图和编辑工具           │
│                             │
│ 基础工具                     │
│ ● 选择工具              V   │
│ ● 手型工具              H   │
│                             │
│ 绘图工具                     │
│ ● 画笔工具              D   │
│ ● 橡皮擦                E   │
│ ● 激光笔                L   │
│                             │
│ 形状工具                     │
│ ● 矩形                  R   │
│ ● 椭圆                  O   │
│ ...                         │
└─────────────────────────────┘
```

### 2. 画笔工具激活后
- 面板关闭
- 画布上光标变成画笔
- 可以自由绘制线条

### 3. 快速访问面板
```
┌─────────────────────────────┐
│ 快速访问                [X] │
├─────────────────────────────┤
│ 常用工具和节点               │
│                             │
│ ┌─────┬─────┐               │
│ │画笔 │文本 │               │
│ ├─────┼─────┤               │
│ │矩形 │箭头 │               │
│ ├─────┼─────┤               │
│ │输入 │图片 │               │
│ └─────┴─────┘               │
└─────────────────────────────┘
```

## ✅ 测试完成检查清单

### 功能测试
- [ ] 工具面板正确打开和关闭
- [ ] 所有工具分类正确显示
- [ ] 快捷键标签正确显示
- [ ] 画笔工具可以绘图
- [ ] 矩形工具可以画形状
- [ ] 文本工具可以添加文字
- [ ] 箭头工具可以画箭头
- [ ] 选择工具可以选择对象
- [ ] AI 节点正确添加到画布中心

### UI 测试
- [ ] 面板滑入动画流畅
- [ ] Hover 效果正确
- [ ] Active 状态正确
- [ ] 快捷键样式正确
- [ ] 滚动流畅
- [ ] 白色主题一致

### 交互测试
- [ ] 点击工具自动关闭面板
- [ ] 工具切换顺畅
- [ ] 关闭按钮工作正常
- [ ] 再次点击图标可关闭面板

### 性能测试
- [ ] 面板打开速度快（< 200ms）
- [ ] 滚动无卡顿
- [ ] 工具切换即时响应
- [ ] 无内存泄漏

## 🎯 测试结果记录

### 测试环境
- 浏览器: _______________
- 操作系统: _______________
- 屏幕分辨率: _______________
- 测试日期: _______________

### 测试结果

| 测试项 | 通过 | 失败 | 备注 |
|--------|------|------|------|
| 工具面板打开 | ☐ | ☐ | |
| 工具分类显示 | ☐ | ☐ | |
| 快捷键显示 | ☐ | ☐ | |
| 画笔工具 | ☐ | ☐ | |
| 矩形工具 | ☐ | ☐ | |
| 文本工具 | ☐ | ☐ | |
| 箭头工具 | ☐ | ☐ | |
| AI节点添加 | ☐ | ☐ | |
| 快速访问 | ☐ | ☐ | |
| 面板关闭 | ☐ | ☐ | |

### 发现的问题
1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

### 改进建议
1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

## 📞 需要帮助？

如果测试过程中遇到问题：
1. 检查浏览器控制台（F12）的错误信息
2. 尝试清除缓存并刷新 `Ctrl+Shift+R`
3. 查看 `.same/v44-summary.md` 了解功能详情
4. 查看源代码 `src/components/SidePanel.tsx`

---

**版本**: v44
**测试指南版本**: 1.0
**最后更新**: 2025-11-03
