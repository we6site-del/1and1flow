# Version 42 测试指南

## 快速测试步骤

### 测试1: 创建和查看2x2网格

1. **创建工作流**
   - 在画布上创建一个"文本输入"节点
   - 创建一个"图片生成"节点
   - 连接两个节点

2. **配置和执行**
   - 在图片生成节点中设置数量为4
   - 点击"执行"按钮
   - 等待模拟生成完成（约2-4秒）

3. **验证网格布局**
   - ✅ 应该看到4张图片以2x2网格排列
   - ✅ 每个缩略图是正方形
   - ✅ 缩略图之间有均匀间距
   - ✅ 所有图片都在节点内部显示

### 测试2: 缩略图交互效果

1. **Hover测试**
   - 将鼠标悬停在任意缩略图上
   - ✅ 缩略图应该轻微放大
   - ✅ 应该出现阴影效果
   - ✅ 鼠标指针变为手型

2. **点击测试**
   - 点击任意缩略图
   - ✅ Lightbox应该立即打开
   - ✅ 显示该图片的放大版本
   - ✅ 背景变为半透明黑色并模糊

### 测试3: Lightbox功能

1. **查看图片**
   - 打开Lightbox后
   - ✅ 图片应该居中显示
   - ✅ 图片周围有白色边框容器
   - ✅ 底部有两个按钮："继续创作"和"关闭"

2. **按钮hover**
   - 将鼠标悬停在"继续创作"按钮上
   - ✅ 按钮背景色变深
   - 将鼠标悬停在"关闭"按钮上
   - ✅ 按钮背景色变深

3. **关闭Lightbox**
   - 方法1: 点击"关闭"按钮
   - ✅ Lightbox关闭
   - 方法2: 点击Lightbox外部背景区域
   - ✅ Lightbox关闭

### 测试4: 继续创作功能

1. **触发继续创作**
   - 打开任意图片的Lightbox
   - 点击"继续创作"按钮

2. **验证新节点创建**
   - ✅ 应该创建两个新节点：输入节点和图片生成节点
   - ✅ 新节点位于原节点下方
   - ✅ 新输入节点包含选中的图片
   - ✅ 两个新节点已自动连接
   - ✅ 新节点被选中（蓝色高亮边框）
   - ✅ 视图自动缩放到新节点位置

3. **验证图片传递**
   - 检查新输入节点
   - ✅ 应该显示从上一个节点选中的图片

### 测试5: 不同数量的图片

1. **1张图片**
   - 设置数量为1，执行
   - ✅ 显示1x1网格（单张缩略图）

2. **2张图片**
   - 设置数量为2，执行
   - ✅ 显示1x2网格（一行两列）

3. **3张图片**
   - 设置数量为3，执行
   - ✅ 显示2x2网格（第二行只有一张）

4. **4张图片**
   - 设置数量为4，执行
   - ✅ 显示完整2x2网格

### 测试6: 输入节点改进

1. **文本输入**
   - 在文本输入节点的文本框中输入多行文字
   - ✅ 文本框高度自动增长
   - ✅ 最小高度60px
   - ✅ 最大高度280px
   - ✅ 超过最大高度后出现滚动条

2. **图片上传**
   - 点击"上传图片"按钮
   - 选择1张图片
   - ✅ 图片显示在节点中
   - 继续上传至3张
   - ✅ 显示"3/3张图片"
   - ✅ 上传按钮隐藏

3. **图片网格**
   - 上传3张图片
   - ✅ 图片以3列网格排列
   - ✅ 每张图片都可以删除

## 性能测试

### 响应速度
- 点击缩略图到Lightbox打开: < 50ms
- Lightbox关闭: < 50ms
- 继续创作节点创建: < 200ms
- 缩略图hover效果: 即时响应

### 流畅度
- 所有动画应该平滑无卡顿
- 图片加载应该渐进显示
- 视图缩放应该流畅过渡

## 边界情况测试

### 极端情况
1. **快速点击**
   - 快速连续点击多个缩略图
   - ✅ 应该只打开最后点击的图片
   - ✅ 不应该出现多个Lightbox

2. **重复继续创作**
   - 从同一张图片多次继续创作
   - ✅ 每次都应该创建新的节点链
   - ✅ 节点按顺序排列在下方

3. **删除节点**
   - 在Lightbox打开时删除原节点
   - ✅ Lightbox应该正常关闭（或继续显示）

## 样式一致性测试

### 主题颜色
- ✅ 按钮使用 `var(--ai-accent)` 蓝色
- ✅ 边框使用浅灰色
- ✅ 文字使用深灰色
- ✅ 背景使用白色和浅灰色

### 圆角和间距
- ✅ 缩略图圆角: 6px
- ✅ Lightbox容器圆角: 12px
- ✅ 按钮圆角: 6px
- ✅ 网格间距: 6px
- ✅ 按钮间距: 12px

## 浏览器兼容性

### 测试浏览器
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

### 功能检查
- [ ] CSS Grid布局正常
- [ ] Backdrop Filter效果正常
- [ ] Pointer Events正常
- [ ] 过渡动画流畅

## 已知问题和限制

### 当前限制
1. **图片数量**: 最多支持4张（2x2网格）
2. **缩略图**: 固定为正方形，不保留原始宽高比
3. **Lightbox**: 不支持键盘导航
4. **图片**: 使用模拟数据（picsum.photos）

### 计划改进
- 支持更多图片（可滚动网格）
- 缩略图根据原始宽高比调整
- 添加键盘快捷键（ESC、方向键）
- 集成真实AI API

## 回归测试

确保以下功能没有被破坏：

- [ ] 节点拖拽功能正常
- [ ] 节点连接功能正常
- [ ] 节点执行功能正常
- [ ] AI聊天面板正常
- [ ] 用户登录功能正常
- [ ] 文本生成节点正常
- [ ] 视频生成节点正常
- [ ] 画布缩放和平移正常

## 测试报告模板

```
测试日期: YYYY-MM-DD
测试人员: [姓名]
测试版本: v42

### 测试结果
- 2x2网格布局: ✅/❌
- 缩略图交互: ✅/❌
- Lightbox功能: ✅/❌
- 继续创作: ✅/❌
- 输入节点: ✅/❌

### 发现的问题
1. [问题描述]
2. [问题描述]

### 建议
1. [改进建议]
2. [改进建议]
```

## 快速回归脚本

如果遇到问题，尝试以下步骤：

1. **刷新页面**: `Ctrl+R` 或 `Cmd+R`
2. **清除缓存**: `Ctrl+Shift+R` 或 `Cmd+Shift+R`
3. **检查控制台**: `F12` 查看是否有错误
4. **重启开发服务器**: 停止并重新运行 `bun run dev`

## 支持和反馈

如果发现任何问题或有改进建议，请：
1. 记录详细的复现步骤
2. 截图或录屏问题现象
3. 检查浏览器控制台错误
4. 提供测试环境信息（浏览器、操作系统）
