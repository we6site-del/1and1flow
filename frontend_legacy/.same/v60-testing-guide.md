# Version 60 - å®Œæ•´æµ‹è¯•æŒ‡å—

## ğŸ¯ æ¦‚è¿°

Version 60 å®Œæˆäº†ä»¥ä¸‹é‡è¦åŠŸèƒ½ï¼š
1. âœ… Supabase æ•°æ®åº“å®Œæ•´é…ç½®ï¼ˆ17ä¸ªè¡¨ï¼‰
2. âœ… Dashboard ä»æ•°æ®åº“åŠ è½½é¡¹ç›®
3. âœ… å›¾ç‰‡æ‹–æ‹½å¯¼å…¥åŠŸèƒ½
4. âœ… åŠ è½½çŠ¶æ€å’Œç©ºçŠ¶æ€UI
5. âœ… ç”¨æˆ·ä¿¡æ¯åŒæ­¥ä¿®å¤

---

## ğŸ“¦ å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ•°æ®åº“é…ç½®

**é…ç½®è¯¦æƒ…ï¼š**
- é¡¹ç›®ID: `ukpbtmtmeyiqlojyorel`
- åŒºåŸŸ: `us-east-1`
- Postgresç‰ˆæœ¬: 17.6.1.031

**å·²åˆ›å»ºçš„è¡¨ï¼ˆ17ä¸ªï¼‰ï¼š**
1. `profiles` - ç”¨æˆ·é…ç½®æ–‡ä»¶
2. `projects` - é¡¹ç›®æ•°æ®
3. `project_versions` - é¡¹ç›®ç‰ˆæœ¬å†å²
4. `ai_generations` - AI ç”Ÿæˆè®°å½•
5. `credit_transactions` - ç§¯åˆ†äº¤æ˜“è®°å½•
6. `subscription_history` - è®¢é˜…å†å²
7. `user_assets` - ç”¨æˆ·èµ„æº
8. `activity_logs` - æ´»åŠ¨æ—¥å¿—
9. `project_shares` - é¡¹ç›®åˆ†äº«
10. `project_collaborators` - åä½œè€…
11. `project_comments` - é¡¹ç›®è¯„è®º
12. `subscription_plans` - è®¢é˜…è®¡åˆ’

**RLS ç­–ç•¥ï¼š** 44 ä¸ªå®‰å…¨ç­–ç•¥å·²é…ç½®
**æ•°æ®åº“å‡½æ•°ï¼š** 13 ä¸ªä¸šåŠ¡é€»è¾‘å‡½æ•°
**è§¦å‘å™¨ï¼š** 7 ä¸ªè‡ªåŠ¨åŒ–è§¦å‘å™¨

### 2. Dashboard æ•°æ®åº“é›†æˆ

- âœ… ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·é¡¹ç›®
- âœ… æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆspinnerï¼‰
- âœ… ç©ºçŠ¶æ€UIï¼ˆå½“æ²¡æœ‰é¡¹ç›®æ—¶ï¼‰
- âœ… é¡¹ç›®ç¼©ç•¥å›¾æ”¯æŒ
- âœ… æ ¼å¼åŒ–æ›´æ–°æ—¶é—´æ˜¾ç¤º

### 3. å›¾ç‰‡æ‹–æ‹½å¯¼å…¥

- âœ… å…¨å±€æ‹–æ‹½ç›‘å¬
- âœ… æ‹–æ‹½åŒºåŸŸå¯è§†åŒ–åé¦ˆ
- âœ… å¤šå›¾ç‰‡æ‰¹é‡å¯¼å…¥
- âœ… è‡ªåŠ¨è°ƒæ•´å›¾ç‰‡å°ºå¯¸
- âœ… æ™ºèƒ½æ¨ªå‘æ’åˆ—
- âœ… å¤„ç†è¿›åº¦æç¤º

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1: ç™»å½•/æ³¨å†Œæµç¨‹

#### æ­¥éª¤ 1.1: é‚®ç®±æ³¨å†Œ
1. æ‰“å¼€åº”ç”¨ï¼Œç‚¹å‡»"å¼€å§‹ä½¿ç”¨"æˆ–"ç«‹å³å¼€å§‹åˆ›ä½œ"
2. åœ¨å¼¹å‡ºçš„è®¤è¯æ¨¡æ€æ¡†ä¸­ï¼Œé€‰æ‹©"æ³¨å†Œ"æ ‡ç­¾
3. å¡«å†™ï¼š
   - é‚®ç®±ï¼š`test@example.com`
   - å¯†ç ï¼š`Test123456!`
   - å…¨åï¼ˆå¯é€‰ï¼‰ï¼š`æµ‹è¯•ç”¨æˆ·`
4. ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
5. **é¢„æœŸç»“æœï¼š**
   - æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•
   - è·³è½¬åˆ° Dashboard ç•Œé¢
   - å·¦ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œåç§°
   - ç§¯åˆ†æ˜¾ç¤ºä¸º 1000ï¼ˆé»˜è®¤ï¼‰

#### æ­¥éª¤ 1.2: OAuth ç™»å½•ï¼ˆéœ€é…ç½®ï¼‰
1. åœ¨è®¤è¯æ¨¡æ€æ¡†ä¸­ç‚¹å‡»"ä½¿ç”¨ Google ç™»å½•"æˆ–"ä½¿ç”¨ GitHub ç™»å½•"
2. å®Œæˆ OAuth æˆæƒæµç¨‹
3. **é¢„æœŸç»“æœï¼š**
   - è‡ªåŠ¨åˆ›å»ºç”¨æˆ·é…ç½®
   - è·³è½¬åˆ° Dashboard
   - ç”¨æˆ·ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º

#### æ­¥éª¤ 1.3: éªŒè¯ç”¨æˆ·é…ç½®åˆ›å»º
1. ç™»å½•åï¼Œåœ¨ Supabase Dashboard ä¸­æ£€æŸ¥ï¼š
   - `auth.users` è¡¨ä¸­å­˜åœ¨è¯¥ç”¨æˆ·
   - `profiles` è¡¨ä¸­è‡ªåŠ¨åˆ›å»ºäº†å¯¹åº”çš„é…ç½®æ–‡ä»¶
   - é»˜è®¤ç§¯åˆ†ä¸º 1000
   - `subscription_tier` ä¸º 'free'

### æµ‹è¯• 2: Dashboard é¡¹ç›®ç®¡ç†

#### æ­¥éª¤ 2.1: ç©ºçŠ¶æ€æ˜¾ç¤º
1. é¦–æ¬¡ç™»å½•æ—¶ï¼Œåº”è¯¥çœ‹åˆ°ç©ºçŠ¶æ€UI
2. **éªŒè¯ï¼š**
   - æ˜¾ç¤º"è¿˜æ²¡æœ‰é¡¹ç›®"æ ‡é¢˜
   - æ˜¾ç¤º"åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªAIå·¥ä½œæµé¡¹ç›®"æè¿°
   - æ˜¾ç¤º"åˆ›å»ºé¡¹ç›®"æŒ‰é’®
   - æ—  spinner æˆ–åŠ è½½çŠ¶æ€

#### æ­¥éª¤ 2.2: åˆ›å»ºé¡¹ç›®
1. ç‚¹å‡»"åˆ›å»ºæ–°é¡¹ç›®"æŒ‰é’®ï¼ˆå·¦ä¾§è¾¹æ æˆ–ç©ºçŠ¶æ€ä¸­ï¼‰
2. **é¢„æœŸç»“æœï¼š**
   - è·³è½¬åˆ°ç”»å¸ƒç•Œé¢
   - é¡¶éƒ¨æ˜¾ç¤º"æœªå‘½åé¡¹ç›®"
   - å¯ä»¥æ­£å¸¸ä½¿ç”¨ç”»å¸ƒå·¥å…·

#### æ­¥éª¤ 2.3: è¿”å› Dashboard
1. åœ¨ç”»å¸ƒç•Œé¢ï¼Œç‚¹å‡»å·¦ä¾§è¾¹æ çš„"è¿”å›"æŒ‰é’®
2. **é¢„æœŸç»“æœï¼š**
   - è¿”å›åˆ° Dashboard
   - **æ³¨æ„ï¼š** ç›®å‰é¡¹ç›®å°šæœªè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“ï¼Œæ‰€ä»¥åˆ—è¡¨ä»ä¸ºç©º

### æµ‹è¯• 3: å›¾ç‰‡æ‹–æ‹½å¯¼å…¥

#### æ­¥éª¤ 3.1: å‡†å¤‡æµ‹è¯•å›¾ç‰‡
 2-3 å¼ æµ‹è¯•å›¾ç‰‡ï¼ˆJPGã€PNG ç­‰æ ¼å¼ï¼‰

#### æ­¥éª¤ 3.2: æ‹–æ‹½å¯¼å…¥
1. è¿›å…¥ç”»å¸ƒç•Œé¢
2. ä»æ–‡ä»¶ç®¡ç†å™¨æ‹–æ‹½å›¾ç‰‡åˆ°æµè§ˆå™¨çª—å£
3. **é¢„æœŸæ•ˆæœï¼š**
   - æ‹–æ‹½æ—¶æ˜¾ç¤ºè™šçº¿è¾¹æ¡†çš„æ”¾ç½®åŒºåŸŸ
   - æ˜¾ç¤º"é‡Šæ”¾ä»¥å¯¼å…¥å›¾ç‰‡"æç¤º
   - é‡Šæ”¾åæ˜¾ç¤º"å¤„ç†å›¾ç‰‡ä¸­..."
   - å›¾ç‰‡è‡ªåŠ¨æ·»åŠ åˆ°ç”»å¸ƒä¸­å¿ƒ
   - å¤šå¼ å›¾ç‰‡æ¨ªå‘æ’åˆ—

#### æ­¥éª¤ 3.3: éªŒè¯å›¾ç‰‡å¯¼å…¥
1. **æ£€æŸ¥å›¾ç‰‡å±æ€§ï¼š**
   - æœ€å¤§å®½åº¦ä¸è¶…è¿‡ 400px
   - ä¿æŒåŸå§‹å®½é«˜æ¯”
   - å›¾ç‰‡æ¸…æ™°æ— å¤±çœŸ
2. **æ£€æŸ¥å›¾ç‰‡æ’åˆ—ï¼š**
   - å¤šå¼ å›¾ç‰‡æ¨ªå‘æ’åˆ—
   - é—´è·çº¦ 420px
   - å±…ä¸­æ˜¾ç¤º

### æµ‹è¯• 4: ç”¨æˆ·ä¿¡æ¯åŒæ­¥

#### æ­¥éª¤ 4.1: Dashboard ç”¨æˆ·ä¿¡æ¯
1. ç™»å½•ååœ¨ Dashboard ç•Œé¢
2. **éªŒè¯å·¦ä¸Šè§’ UserDropdownï¼š**
   - æ˜¾ç¤ºç”¨æˆ·å¤´åƒï¼ˆé»˜è®¤ä¸ºé‚®ç®±é¦–å­—æ¯ï¼‰
   - æ˜¾ç¤ºç”¨æˆ·åç§°æˆ–é‚®ç®±
   - æ˜¾ç¤ºç§¯åˆ†æ•°é‡
3. ç‚¹å‡»å¤´åƒï¼Œ**éªŒè¯ä¸‹æ‹‰èœå•ï¼š**
   - ä¸ªäººèµ„æ–™
   - æˆ‘çš„ç§¯åˆ†
   - è®¢é˜…ç®¡ç†
   - é€€å‡ºç™»å½•

#### æ­¥éª¤ 4.2: Canvas ç”¨æˆ·ä¿¡æ¯
1. è¿›å…¥ç”»å¸ƒç•Œé¢
2. **éªŒè¯å³ä¸Šè§’ UserPanelï¼š**
   - æ˜¾ç¤ºç”¨æˆ·å›¾æ ‡
   - æ˜¾ç¤ºç§¯åˆ†æ•°é‡
3. ç‚¹å‡»ç”¨æˆ·æŒ‰é’®ï¼Œ**éªŒè¯ç”¨æˆ·é¢æ¿ï¼š**
   - ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
   - ç§¯åˆ†ä½™é¢æ˜¾ç¤º
   - å¿«æ·æ“ä½œæŒ‰é’®
   - é€€å‡ºç™»å½•æŒ‰é’®

#### æ­¥éª¤ 4.3: é€€å‡ºç™»å½•
1. ç‚¹å‡»"é€€å‡ºç™»å½•"
2. **é¢„æœŸç»“æœï¼š**
   - è¿”å›åˆ° Landing Page
   - ç”¨æˆ·çŠ¶æ€æ¸…é™¤
   - ä¸‹æ¬¡è®¿é—®éœ€è¦é‡æ–°ç™»å½•

### æµ‹è¯• 5: æ•°æ®åº“æŸ¥è¯¢

#### æ­¥éª¤ 5.1: ä½¿ç”¨ Supabase Dashboard
1. ç™»å½• Supabase Dashboard
2. å¯¼èˆªåˆ° Table Editor
3. **æ£€æŸ¥å„è¡¨æ•°æ®ï¼š**

**profiles è¡¨ï¼š**
```sql
SELECT * FROM profiles LIMIT 10;
```
- éªŒè¯ç”¨æˆ·é…ç½®æ­£ç¡®åˆ›å»º
- é»˜è®¤ç§¯åˆ†ä¸º 1000
- è®¢é˜…å±‚çº§ä¸º 'free'

**projects è¡¨ï¼š**
```sql
SELECT * FROM projects ORDER BY created_at DESC LIMIT 10;
```
- **æ³¨æ„ï¼š** ç›®å‰åˆ›å»ºé¡¹ç›®åŠŸèƒ½å°šæœªä¸æ•°æ®åº“å®Œå…¨é›†æˆ
- æ­¤è¡¨å¯èƒ½ä¸ºç©º

#### æ­¥éª¤ 5.2: æµ‹è¯• RLS ç­–ç•¥
1. å°è¯•ä»å¦ä¸€ä¸ªç”¨æˆ·è´¦æˆ·è®¿é—®ç¬¬ä¸€ä¸ªç”¨æˆ·çš„æ•°æ®
2. **é¢„æœŸç»“æœï¼š**
   - åªèƒ½çœ‹åˆ°è‡ªå·±çš„é¡¹ç›®
   - æ— æ³•è®¿é—®å…¶ä»–ç”¨æˆ·çš„ç§æœ‰æ•°æ®
   - å…¬å¼€é¡¹ç›®å¯ä»¥æŸ¥çœ‹

---

## âš ï¸ å·²çŸ¥é™åˆ¶

### 1. é¡¹ç›®ä¿å­˜æœªå®Œå…¨é›†æˆ
- **ç°çŠ¶ï¼š** åˆ›å»ºé¡¹ç›®æ—¶å°šæœªè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- **å½±å“ï¼š** Dashboard é¡¹ç›®åˆ—è¡¨å§‹ç»ˆä¸ºç©º
- **å¾…ä¿®å¤ï¼š** App.tsx ä¸­çš„ `handleCreateProject` éœ€è¦è°ƒç”¨ `createProject()`

### 2. é¡¹ç›®æ‰“å¼€æœªå®ç°
- **ç°çŠ¶ï¼š** `handleOpenProject` å°šæœªä»æ•°æ®åº“åŠ è½½é¡¹ç›®æ•°æ®
- **å½±å“ï¼š** æ— æ³•æ¢å¤ä¹‹å‰çš„é¡¹ç›®
- **å¾…ä¿®å¤ï¼š** éœ€è¦åŠ è½½ `canvas_data` å¹¶åº”ç”¨åˆ°ç¼–è¾‘å™¨

### 3. OAuth ç™»å½•éœ€è¦é…ç½®
- **ç°çŠ¶ï¼š** Google å’Œ GitHub OAuth éœ€è¦åœ¨ Supabase ä¸­é…ç½®
- **å½±å“ï¼š** OAuth æŒ‰é’®ç‚¹å‡»åå¯èƒ½å¤±è´¥
- **é…ç½®æ­¥éª¤ï¼š**
  1. åœ¨ Supabase Dashboard > Authentication > Providers
  2. å¯ç”¨ Google å’Œ GitHub
  3. é…ç½®ç›¸åº”çš„ Client ID å’Œ Secret

### 4. å›¾ç‰‡æ‹–æ‹½ç»„ä»¶æœªé›†æˆåˆ° App.tsx
- **ç°çŠ¶ï¼š** `ImageDropZone` ç»„ä»¶å·²åˆ›å»ºä½†æœªæ·»åŠ åˆ°åº”ç”¨ä¸­
- **å½±å“ï¼š** æ‹–æ‹½å¯¼å…¥åŠŸèƒ½æš‚æ—¶æ— æ³•ä½¿ç”¨
- **å¾…ä¿®å¤ï¼š** éœ€è¦åœ¨ `components` ä¸­æ·»åŠ  `<GlobalImageDropZone />`

---

## ğŸ”§ å¾…ä¿®å¤é—®é¢˜

### é«˜ä¼˜å…ˆçº§

1. **é›†æˆé¡¹ç›®åˆ›å»ºåˆ°æ•°æ®åº“**
   ```typescript
   // ai-workflow/src/App.tsx
   const handleCreateProject = async () => {
     if (!user?.id) return
     const newProject = await createProject(user.id, 'æœªå‘½åé¡¹ç›®')
     if (newProject) {
       setCurrentProjectId(newProject.id)
       setCurrentProjectName(newProject.name)
       setCurrentView('canvas')
     }
   }
   ```

2. **å®ç°é¡¹ç›®åŠ è½½åŠŸèƒ½**
   ```typescript
   const handleOpenProject = async (projectId: string) => {
     const project = await getProject(projectId)
     if (project) {
       setCurrentProjectId(project.id)
       setCurrentProjectName(project.name)
       // TODO: Load canvas_data into editor
       setCurrentView('canvas')
     }
   }
   ```

3. **æ·»åŠ å›¾ç‰‡æ‹–æ‹½ç»„ä»¶åˆ° App**
   ```typescript
   // åœ¨ App.tsx çš„ components å®šä¹‰ä¸­æ·»åŠ 
   import { GlobalImageDropZone } from './components/ImageDropZone'
   
   // åœ¨ InFrontOfTheCanvas ç»„ä»¶ä¸­æ·»åŠ 
   <GlobalImageDropZone />
   ```

### ä¸­ä¼˜å…ˆçº§

4. **å®ç°é¡¹ç›®è‡ªåŠ¨ä¿å­˜**
   - ä½¿ç”¨ `useAutoSave` hook
   - æ¯ 30 ç§’ä¿å­˜åˆ°æ•°æ®åº“

5. **æ·»åŠ é¡¹ç›®ç¼©ç•¥å›¾ç”Ÿæˆ**
   - åœ¨ä¿å­˜æ—¶ç”Ÿæˆç”»å¸ƒæˆªå›¾
   - ä¸Šä¼ åˆ° Supabase Storage
   - æ›´æ–° `thumbnail_url`

6. **ä¼˜åŒ– Dashboard åŠ è½½æ€§èƒ½**
   - æ·»åŠ åˆ†é¡µ
   - å®ç°è™šæ‹Ÿæ»šåŠ¨
   - ç¼“å­˜é¡¹ç›®åˆ—è¡¨

### ä½ä¼˜å…ˆçº§

7. **å®Œå–„ç”¨æˆ·è®¾ç½®**
   - ä¸ªäººèµ„æ–™ç¼–è¾‘
   - å¤´åƒä¸Šä¼ 
   - å¯†ç ä¿®æ”¹

8. **å®ç°é¡¹ç›®æœç´¢å’Œç­›é€‰**
   - æŒ‰åç§°æœç´¢
   - æŒ‰æ ‡ç­¾ç­›é€‰
   - æŒ‰æ—¥æœŸæ’åº

---

## ğŸ“ æ•°æ®åº“é…ç½®è¯´æ˜

### Supabase ç¯å¢ƒå˜é‡

'EOF'`.env` æ–‡ä»¶åŒ…å«ï¼š

```env
VITE_SUPABASE_URL=https://ukpbtmtmeyiqlojyorel.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ...ï¼ˆä½ çš„ anon keyï¼‰
```

### è¿è¡Œæ•°æ®åº“è¿ç§»

cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/**è­¦å‘Šï¼šä¼šåˆ é™¤ç°æœ‰æ•°æ®**ï¼‰ï¼š

```bash
# 1. è¿æ¥åˆ° Supabase é¡¹ç›®
bunx supabase link --project-ref ukpbtmtmeyiqlojyorel

# 2. åº”ç”¨è¿ç§»
bunx supabase db push

# æˆ–è€…ç›´æ¥åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­è¿è¡Œï¼š
# .same/database-schema.sql
# .same/database-schema-collaboration.sql
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å®æ–½ï¼ˆVersion 61ï¼‰
1. âœ… ä¿®å¤é¡¹ç›®åˆ›å»ºå’Œä¿å­˜åˆ°æ•°æ®åº“
2. âœ… é›†æˆ `GlobalImageDropZone` åˆ°ç”»å¸ƒ
3. âœ… å®ç°é¡¹ç›®åŠ è½½åŠŸèƒ½

### çŸ­æœŸç›®æ ‡ï¼ˆVersion 62-63ï¼‰
4. æ·»åŠ é¡¹ç›®è‡ªåŠ¨ä¿å­˜
5. å®ç°ç¼©ç•¥å›¾ç”Ÿæˆ
6. é…ç½® OAuth æä¾›å•†

### ä¸­æœŸç›®æ ‡ï¼ˆVersion 64-66ï¼‰
7. å®ç° AI ç”ŸæˆåŠŸèƒ½
8. é›†æˆ Stripe æ”¯ä»˜
9. æ·»åŠ é¡¹ç›®åä½œåŠŸèƒ½

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  

```
cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  ____/____/______
cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  _________________
cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  _________________
cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  60

[ ] 1. ç™»å½•/æ³¨å†Œæµç¨‹ - é€šè¿‡/å¤±è´¥
[ ] 2. Dashboard é¡¹ç›®åˆ—è¡¨ - é€šè¿‡/å¤±è´¥  
[ ] 3. å›¾ç‰‡æ‹–æ‹½å¯¼å…¥ - é€šè¿‡/å¤±è´¥
[ ] 4. ç”¨æˆ·ä¿¡æ¯åŒæ­¥ - é€šè¿‡/å¤±è´¥
[ ] 5. æ•°æ®åº“æŸ¥è¯¢ - é€šè¿‡/å¤±è´¥

cd /home/project && npm_config_yes=true cd ai-workflow && ls -la src/components/Dashboard*  
______________________________
______________________________
______________________________
```

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿ** å¼€å§‹æµ‹è¯•å§ï¼ ğŸš€
