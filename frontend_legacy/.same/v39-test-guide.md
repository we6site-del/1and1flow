# Version 39 完整测试指南

## 快速验证清单

打开应用后，请按以下顺序测试所有新功能：

### ✅ 测试1：输入节点图片上传（2分钟）

**步骤**：
1. 点击左侧工具栏的"输入"图标（📝）
2. 在画布上点击放置节点
3. 点击节点内的"上传图片 (0/3)"按钮
4. **预期结果**：应该打开文件选择对话框
5. 选择1-2张图片
6. **预期结果**：图片显示在3列网格中，计数更新为 (2/3)
7. 再上传1张图片
8. **预期结果**：显示3张图片，上传按钮消失

**验证点**：
- ✅ 点击上传按钮能打开文件对话框
- ✅ 图片正确显示
- ✅ 计数准确 (1/3, 2/3, 3/3)
- ✅ 达到3张后按钮自动隐藏
- ✅ 删除图片后按钮重新出现

**常见问题**：
- 如果点击上传按钮没反应：刷新页面（Ctrl+R）
- 如果图片不显示：检查图片格式是否为jpg/png

---

### ✅ 测试2：文本框自动调整（1分钟）

**步骤**：
1. 在同一个输入节点的文本框中
2. 输入一行文字
3. **预期结果**：节点高度保持紧凑（约60px）
4. 按Enter多次换行，输入10行文字
5. **预期结果**：节点高度自动增加
6. 继续输入到20行
7. **预期结果**：节点达到最大高度（280px），出现滚动条

**验证点**：
- ✅ 少量文字时节点紧凑
- ✅ 文字增多时节点自动扩展
- ✅ 达到最大高度后显示滚动条

---

### ✅ 测试3：图片生成和网格布局（3分钟）

**步骤**：
1. 在输入节点中输入：
   ```
   一台复古风格的绿色咖啡机
   放在木质桌面上
   ```
2. 从输入节点的右侧端口拖出连接
3. 选择"图片"
4. 在图片生成节点中：
   - 数量：选择 4
   - 比例：选择 1:1 方形
5. 点击"执行 ⚡4"
6. 打开浏览器控制台（F12）
7. **预期结果**：控制台显示：
   ```
   生成图片使用的提示词: 一台复古风格的绿色咖啡机...
   参考图片数量: 0
   ```
8. 等待生成完成（约3秒）
9. **预期结果**：4张图片以2x2网格显示在节点下方

**验证点**：
- ✅ 控制台正确显示提示词
- ✅ 4张图片以2行2列网格排列
- ✅ 每张图片为正方形缩略图
- ✅ 图片清晰可见

---

### ✅ 测试4：图片放大预览（2分钟）

**步骤**：
1. 将鼠标悬停在任一生成的图片上
2. **预期结果**：显示半透明遮罩和放大图标（🔍+）
3. 点击图片
4. **预期结果**：
   - 全屏黑色半透明背景
   - 图片居中放大显示
   - 底部显示"继续创作"和"关闭"两个按钮
5. 点击"关闭"按钮
6. **预期结果**：返回画布视图
7. 再次点击另一张图片
8. 点击背景（图片外部区域）
9. **预期结果**：也能关闭预览

**验证点**：
- ✅ 悬停显示放大图标
- ✅ 点击后全屏显示
- ✅ 图片清晰放大
- ✅ "关闭"按钮工作
- ✅ 点击背景也能关闭

---

### ✅ 测试5：放大视图继续创作（3分钟）

**步骤**：
1. 点击任一生成的图片打开放大视图
2. 点击"继续创作"按钮
3. **预期结果**：
   - 自动创建新的输入节点
   - 新输入节点包含当前图片
   - 自动创建新的图片生成节点
   - 两节点已连接
   - 视图自动缩放到新节点
4. 在新图片生成节点中点击"执行"
5. **预期结果**：
   - 控制台显示参考图片数量: 1
   - 生成新的图片

**验证点**：
- ✅ 自动创建输入+生成节点
- ✅ 节点正确连接
- ✅ 视图自动缩放
- ✅ 新输入节点包含选中的图片
- ✅ 可以基于图片继续生成

---

### ✅ 测试6：UI改进验证（1分钟）

**步骤**：
1. 查看页面右下角
2. **预期结果**：没有任何license或"for production"文字
3. 点击画布上的任意非节点区域（比如一条线）
4. **预期结果**：顶部中间出现样式面板
5. 观察样式面板位置
6. **预期结果**：居中对齐，白色背景，圆角设计

**验证点**：
- ✅ 右下角完全干净
- ✅ 样式面板在顶部中间
- ✅ 样式面板居中对齐
- ✅ 样式面板设计美观

---

### ✅ 测试7：文本生成节点（2分钟）

**步骤**：
1. 点击左侧工具栏的"文本生成"图标（📄）
2. 在画布上放置节点
3. **预期结果**：节点显示正常，无UI错误
4. 在"提示词"框中输入文字
5. **预期结果**：可以正常输入
6. 拖动"温度"滑块
7. **预期结果**：数值更新，滑块流畅
8. 点击"生成文本 ✨"按钮
9. **预期结果**：
   - 按钮变为"生成中..."
   - 2秒后显示生成的文本
   - 文本框正常显示

**验证点**：
- ✅ 节点UI显示正确
- ✅ 所有输入框可用
- ✅ 滑块正常工作
- ✅ 生成按钮有反馈
- ✅ 结果文本正确显示

---

## 完整工作流测试（5分钟）

### 创建一个完整的图片生成工作流

1. **创建输入节点**
   - 输入文字描述
   - 上传2-3张参考图片

2. **连接到图片生成**
   - 拖出连接，选择"图片"
   - 设置生成数量为4张
   - 执行生成

3. **查看结果**
   - 验证2x2网格显示
   - 点击查看每张图片

4. **继续创作**
   - 选择最好的一张图片
   - 点击"继续创作"
   - 查看新节点自动创建

5. **二次生成**
   - 在新节点上再次执行
   - 验证图片间的关联性

6. **验证链式流程**
   - 可以多次继续创作
   - 每次都基于上一次的结果

---

## 性能测试

### 测试大量节点

1. 创建10个输入节点
2. 每个连接到图片生成节点
3. 执行所有节点
4. **预期结果**：
   - 画布保持流畅
   - 节点正确显示
   - 缩放和拖动正常

### 测试大量图片

1. 创建一个输入节点
2. 生成4张图片
3. 继续创作5次
4. **预期结果**：
   - 共20张图片
   - 所有缩略图正确显示
   - 放大预览正常工作

---

## 浏览器兼容性测试

建议在以下浏览器测试：
- ✅ Chrome/Edge（推荐）
- ✅ Firefox
- ✅ Safari

每个浏览器都应该：
- 图片上传正常
- 放大预览流畅
- 网格布局正确

---

## 问题排查

### 问题1：点击上传按钮没反应

**解决方法**：
1. 刷新页面（Ctrl+R）
2. 清除缓存（Ctrl+Shift+R）
3. 检查浏览器控制台是否有错误

### 问题2：图片不显示

**可能原因**：
- 图片格式不支持
- 图片太大（>10MB）
- 网络问题

**解决方法**：
- 使用jpg或png格式
- 压缩图片到5MB以下
- 检查网络连接

### 问题3：放大视图无法关闭

**解决方法**：
- 点击背景
- 刷新页面
- 按ESC键（未来版本会支持）

### 问题4：节点显示不正常

**解决方法**：
1. 选中节点，删除后重新创建
2. 刷新页面
3. 清除浏览器缓存

---

## 已知限制

1. **图片数量**：每次最多生成4张
2. **上传限制**：每个输入节点最多3张图片
3. **文本长度**：文本框最大高度280px
4. **键盘支持**：放大视图暂不支持ESC关闭
5. **真实生成**：当前使用模拟数据，未连接AI API

---

## 反馈建议

如果发现任何问题，请记录：
1. 操作步骤
2. 预期结果
3. 实际结果
4. 浏览器和版本
5. 截图或录屏

---

## 测试报告模板

```markdown
## 测试日期：2025-11-02
## 测试人员：[你的名字]
## 浏览器：Chrome 120

### 测试结果：
- [ ] 输入节点图片上传
- [ ] 文本框自动调整
- [ ] 图片网格布局
- [ ] 放大预览功能
- [ ] 继续创作功能
- [ ] UI改进验证
- [ ] 文本生成节点

### 发现的问题：
1. [问题描述]
2. [问题描述]

### 建议改进：
1. [建议描述]
2. [建议描述]
```

祝测试顺利！🎉
