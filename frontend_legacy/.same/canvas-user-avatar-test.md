# Canvas 工作区用户头像测试指南

## 测试目的
验证登录后 Canvas 工作区左上角用户头像的显示和交互功能是否正常工作。

## 测试前提
1. 应用正在运行（`bun run dev`）
2. Supabase 配置正确
3. 已有测试账号或可以注册新账号

## 测试步骤

### 1. 登录测试

#### 步骤 1.1：打开应用
- 访问应用首页
- 应该看到 Landing 页面，有 "立即开始创作" 按钮

#### 步骤 1.2：点击登录
- 点击右上角 "开始使用" 按钮
- 应该弹出登录/注册模态框

#### 步骤 1.3：执行登录
- 输入邮箱和密码
- 点击 "登录" 按钮
- 等待登录成功

### 2. 进入 Canvas 工作区

#### 步骤 2.1：查看 Dashboard
- 登录成功后应该自动跳转到 Dashboard
- 检查左侧边栏是否显示用户信息
- 检查右上角是否有用户下拉菜单

#### 步骤 2.2：创建或打开项目
- 点击 "创建新项目" 按钮
- 应该进入 Canvas 工作区

### 3. 测试用户头像显示

#### 步骤 3.1：检查头像位置
- ✅ 用户头像应该显示在左上角 Sidebar 的最顶部
- ✅ 头像应该是一个圆形
- ✅ 如果用户有头像图片，应显示图片
- ✅ 如果没有头像图片，应显示用户名/邮箱的首字母（大写）

#### 步骤 3.2：检查头像样式
- ✅ 头像应该有渐变背景（紫色渐变）
- ✅ 头像应该有轻微的阴影效果
- ✅ 首字母应该是白色、粗体、大写

#### 步骤 3.3：检查返回按钮
- ✅ 用户头像下方应该有返回箭头按钮
- ✅ 点击应该返回 Dashboard

### 4. 测试 Tooltip 交互

#### 步骤 4.1：鼠标悬停
- 将鼠标移动到用户头像上
- **不要点击，只是悬停**

#### 步骤 4.2：验证 Tooltip 显示
- ✅ Tooltip 应该在头像右侧弹出
- ✅ Tooltip 应该有淡入动画（从左向右）
- ✅ Tooltip 应该有白色背景和圆角
- ✅ Tooltip 应该有轻微阴影

#### 步骤 4.3：验证 Tooltip 内容
Tooltip 应该包含以下信息：
- ✅ **问候语**：`Hi [用户名]`
  - 如果有 full_name，显示 full_name
  - 否则显示邮箱地址
- ✅ **邮箱地址**：完整的邮箱地址（灰色小字）
- ✅ **分割线**：浅灰色横线
- ✅ **积分余额**：
  - 时钟图标（紫色）
  - 文字：`[数字] 积分`
  - 颜色应该是紫色 (#667eea)

#### 步骤 4.4：验证 Tooltip 位置
- ✅ Tooltip 应该在头像右侧约 12px 处
- ✅ Tooltip 底部应该与头像底部对齐
- ✅ Tooltip 应该有一个小箭头指向头像

#### 步骤 4.5：测试鼠标移出
- 将鼠标从头像上移开
- ✅ Tooltip 应该立即消失

#### 步骤 4.6：测试快速悬停
- 快速将鼠标移入移出头像
- ✅ Tooltip 应该快速显示和隐藏，不应该有延迟或卡顿

### 5. 测试头像动画

#### 步骤 5.1：悬停缩放效果
- 将鼠标悬停在头像上
- ✅ 头像应该有轻微放大效果（scale: 1.1）
- ✅ 阴影应该变得更明显
- ✅ 动画应该流畅（0.2s 过渡）

#### 步骤 5.2：移出恢复
- 将鼠标移出头像
- ✅ 头像应该恢复原始大小
- ✅ 阴影应该恢复原始状态

### 6. 响应式测试

#### 步骤 6.1：窗口缩放
- 调整浏览器窗口大小
- ✅ 头像位置应该保持在左上角
- ✅ Sidebar 宽度保持 60px
- ✅ Tooltip 应该始终可见（不被裁剪）

#### 步骤 6.2：不同屏幕尺寸
测试以下尺寸：
- 1920x1080（桌面）
- 1366x768（小桌面）
- 1024x768（平板横屏）

### 7. 边界情况测试

#### 步骤 7.1：用户信息缺失
- 测试没有 full_name 的用户
  - ✅ 应该显示邮箱地址首字母
  - ✅ Tooltip 中应该显示邮箱作为名称

#### 步骤 7.2：积分为 0
- 测试积分为 0 的用户
  - ✅ 应该显示 "0 积分"

#### 步骤 7.3：长邮箱地址
- 测试很长的邮箱地址
  - ✅ 邮箱应该自动换行（word-break: break-all）
  - ✅ Tooltip 宽度应该调整以适应内容

### 8. 与其他功能的集成测试

#### 步骤 8.1：与登录状态同步
- 登录后进入 Canvas
  - ✅ 头像应该立即显示
- 退出登录（从 Dashboard）
  - ✅ 下次进入 Canvas 应该显示登录按钮而不是头像

#### 步骤 8.2：用户信息更新
- 在 Dashboard 更新用户积分（如果有功能）
  - ✅ Canvas 中的 Tooltip 应该显示更新后的积分

#### 步骤 8.3：头像图片
- 如果用户上传了头像（如果有功能）
  - ✅ Canvas Sidebar 应该显示头像图片
  - ✅ 图片应该完全填充圆形容器

## 已知功能

### ✅ 已实现
1. 用户头像在 Sidebar 左上角显示
2. 未登录时显示登录按钮
3. 已登录时显示头像（图片或首字母）
4. 鼠标悬停显示 Tooltip
5. Tooltip 包含：问候语、邮箱、积分
6. Tooltip 有淡入动画
7. 头像有悬停放大效果
8. 返回 Dashboard 按钮

### 🔄 待优化
1. 点击头像打开用户菜单（当前只有 hover）
2. 头像下拉菜单（类似 Dashboard 的 UserDropdown）
3. 快速切换项目
4. 积分充值入口

## 测试结果记录

### 测试环境
- 浏览器：_________
- 操作系统：_________
- 屏幕分辨率：_________
- 测试日期：_________

### 测试结果
| 测试项 | 通过 | 失败 | 备注 |
|--------|------|------|------|
| 头像显示 | ☐ | ☐ | |
| Tooltip 弹出 | ☐ | ☐ | |
| Tooltip 内容 | ☐ | ☐ | |
| 悬停动画 | ☐ | ☐ | |
| 返回按钮 | ☐ | ☐ | |
| 响应式布局 | ☐ | ☐ | |

### 发现的问题
1. _______________
2. _______________
3. _______________

### 建议改进
1. _______________
2. _______________
3. _______________

## 快速验证清单

打开 Canvas 工作区后，快速验证：

- [ ] 左上角显示用户头像或登录按钮
- [ ] 头像是圆形，有渐变背景
- [ ] 鼠标悬停显示 Tooltip
- [ ] Tooltip 显示用户名、邮箱、积分
- [ ] Tooltip 有平滑动画
- [ ] 头像有悬停放大效果
- [ ] 返回按钮在头像下方可用

---

**测试完成后，请记录任何问题或建议！**
