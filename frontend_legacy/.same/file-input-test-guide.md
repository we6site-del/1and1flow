# 文件输入节点测试指南

## 🎯 测试目标
测试文件输入节点对不同文件类型的支持，包括图片、视频、文档等。

## 📋 测试准备

### 准备测试文件
建议准备以下类型的文件进行测试：

#### 1. 图片文件
- ✅ JPG/JPEG (.jpg, .jpeg)
- ✅ PNG (.png)
- ✅ GIF (.gif)
- ✅ WebP (.webp)
- ✅ SVG (.svg)

#### 2. 视频文件
- ✅ MP4 (.mp4)
- ✅ WebM (.webm)
- ✅ AVI (.avi)
- ✅ MOV (.mov)

#### 3. 文档文件
- ✅ PDF (.pdf) - 红色图标
- ✅ Word (.doc, .docx) - 蓝色图标
- ✅ Excel (.xls, .xlsx) - 绿色图标
- ✅ PowerPoint (.ppt, .pptx)
- ✅ TXT (.txt)

#### 4. 音频文件
- ✅ MP3 (.mp3)
- ✅ WAV (.wav)
- ✅ OGG (.ogg)

#### 5. 压缩文件
- ✅ ZIP (.zip) - 橙色图标
- ✅ RAR (.rar)
- ✅ 7Z (.7z)
- ✅ TAR.GZ (.tar.gz)

## 🚀 测试步骤

### 第一步：进入画布
1. 打开应用，点击 "开始使用"
2. 如果未登录，使用测试账号登录
3. 在 Dashboard 中点击 "新建项目"
4. 进入白色画布界面

### 第二步：添加文件输入节点
1. 点击左侧边栏的**第三个图标**（工具图标）
2. 在弹出的面板中，找到 "AI 工具" 分类
3. 点击 **"文件输入"** 卡片（第二个，带文件图标）
4. 节点会出现在画布中央

### 第三步：测试拖放上传

#### 测试图片文件
1. 准备一张图片（如 `test-image.jpg`）
2. 将图片拖放到节点的上传区域
3. **预期结果**：
   - ✅ 上传区域边框变为绿色高亮
   - ✅ 图片自动显示在节点中
   - ✅ 右上角出现删除按钮
   - ✅ 可以看到完整的图片预览

#### 测试视频文件
1. 准备一个视频文件（如 `test-video.mp4`）
2. 将视频拖放到节点的上传区域
3. **预期结果**：
   - ✅ 视频播放器出现在节点中
   - ✅ 可以点击播放控件播放视频
   - ✅ 显示视频文件名和大小

#### 测试PDF文档
1. 准备一个 PDF 文件（如 `document.pdf`）
2. 将 PDF 拖放到节点
3. **预期结果**：
   - ✅ 显示**红色** PDF 图标
   - ✅ 显示 "PDF" 标签（绿色背景）
   - ✅ 显示文件名和大小

#### 测试Word文档
1. 准备一个 Word 文件（如 `document.docx`）
2. 将文件拖放到节点
3. **预期结果**：
   - ✅ 显示**蓝色** Word 图标（带横线表示文本）
   - ✅ 显示 "WORD" 标签
   - ✅ 显示文件名和大小

#### 测试Excel表格
1. 准备一个 Excel 文件（如 `spreadsheet.xlsx`）
2. 将文件拖放到节点
3. **预期结果**：
   - ✅ 显示**绿色** Excel 图标（带网格线）
   - ✅ 显示 "EXCEL" 标签
   - ✅ 显示文件名和大小

#### 测试压缩文件
1. 准备一个压缩文件（如 `archive.zip`）
2. 将文件拖放到节点
3. **预期结果**：
   - ✅ 显示**橙色**压缩文件图标
   - ✅ 显示 "压缩包" 标签
   - ✅ 显示文件名和大小

### 第四步：测试点击上传
1. 点击节点的上传区域（显示 "Drag & drop or click to upload"）
2. 在文件选择对话框中选择一个文件
3. **预期结果**：
   - ✅ 文件成功上传并显示
   - ✅ 显示正确的文件类型图标

### 第五步：测试URL输入
1. 在节点底部的输入框中粘贴一个文件URL
   - 图片示例: `https://picsum.photos/400/300`
   - 文档示例: `https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf`
2. 点击 "添加" 按钮
3. **预期结果**：
   - ✅ 文件成功加载
   - ✅ 图片URL显示图片预览
   - ✅ 其他URL显示对应的文件图标

### 第六步：测试删除功能
1. 上传任意文件后，点击右上角的 "×" 按钮
2. **预期结果**：
   - ✅ 文件被删除
   - ✅ 节点恢复到空状态
   - ✅ 显示上传提示

### 第七步：测试多个节点
1. 添加3-5个文件输入节点到画布
2. 在每个节点中上传不同类型的文件
3. **预期结果**：
   - ✅ 每个节点独立工作
   - ✅ 文件不会互相影响
   - ✅ 所有节点正常显示

## ✅ 文件类型识别清单

| 文件类型 | 图标颜色 | 标签文字 | 特殊显示 |
|---------|---------|---------|---------|
| 图片 (jpg, png, gif) | 绿色 | 图片 | 图片预览 |
| 视频 (mp4, webm) | 绿色 | 视频 | 视频播放器 |
| PDF | 红色 | PDF | 文件图标 + PDF标记 |
| Word (doc, docx) | 蓝色 | Word | 文件图标 + 横线 |
| Excel (xls, xlsx) | 绿色 | Excel | 文件图标 + 网格 |
| 音频 (mp3, wav) | 绿色 | 音频 | 音符图标 |
| 压缩包 (zip, rar) | 橙色 | 压缩包 | 拉链图标 |
| 其他文件 | 绿色 | 文件 | 默认图标 |

## 🐛 常见问题排查

### 问题1: 文件无法上传
**可能原因**：
- 文件过大（超过50MB）
- 浏览器不支持 FileReader API

**解决方法**：
- 使用较小的文件测试
- 使用现代浏览器（Chrome, Firefox, Edge）

### 问题2: 图片不显示
**可能原因**：
- 文件格式不支持
- DataURL 转换失败

**解决方法**：
- 使用常见格式（JPG, PNG）
- 检查浏览器控制台错误

### 问题3: 视频无法播放
**可能原因**：
- 视频编码不支持
- 浏览器不支持该格式

**解决方法**：
- 使用 MP4 格式（H.264编码）
- 检查浏览器视频支持

## 📊 测试结果记录

### 图片文件测试
- [ ] JPG - 正常显示预览
- [ ] PNG - 正常显示预览
- [ ] GIF - 正常显示预览（动画）
- [ ] WebP - 正常显示预览
- [ ] SVG - 正常显示预览

### 视频文件测试
- [ ] MP4 - 播放器正常工作
- [ ] WebM - 播放器正常工作
- [ ] 显示播放控件
- [ ] 音量控制正常

### 文档文件测试
- [ ] PDF - 红色图标，PDF标签
- [ ] Word - 蓝色图标，Word标签
- [ ] Excel - 绿色图标，Excel标签
- [ ] 文件名正确显示
- [ ] 文件大小正确显示

### 交互功能测试
- [ ] 拖放上传 - 正常工作
- [ ] 点击上传 - 正常工作
- [ ] URL粘贴 - 正常工作
- [ ] 删除文件 - 正常工作
- [ ] 悬停效果 - 边框变绿色

### 多节点测试
- [ ] 可以添加多个节点
- [ ] 节点独立工作
- [ ] 不同文件类型同时显示

## 🎨 视觉效果检查
- [ ] 上传区域边框样式正确
- [ ] 拖放时高亮效果正确（绿色）
- [ ] 文件图标颜色正确
- [ ] 文件类型标签样式正确
- [ ] 删除按钮悬停效果正确（变红）
- [ ] 整体与白色画布主题协调

## 📝 测试总结

### 成功的功能
记录所有正常工作的功能...

### 发现的问题
记录测试中发现的任何问题...

### 改进建议
记录可以改进的地方...

---

**测试日期**: ___________
**测试人员**: ___________
**浏览器版本**: ___________
**测试结果**: ⭐⭐⭐⭐⭐
